{"version":3,"sources":["../../../../../src/javascripts/ng-admin/Crud/column/maReferenceLinkColumn.js"],"names":["maReferenceLinkColumn","getDetailLinkRouteName","field","entity","isReadOnly","showView","enabled","detailLinkRoute","editionView","NgAdminConfiguration","restrict","scope","entry","value","datastore","link","pre","referenceEntity","targetEntity","name","relatedEntity","getEntity","referenceId","values","route","stateParams","id","template","$inject"],"mappings":";;;;;kBAUwBA,qB;AAVxB,SAASC,sBAAT,CAAgCC,KAAhC,EAAuCC,MAAvC,EAA+C;AAC3C,QAAIA,OAAOC,UAAX,EAAuB;AACnB,eAAOD,OAAOE,QAAP,GAAkBC,OAAlB,GAA4B,MAA5B,GAAqC,KAA5C;AACH;AACD,QAAIJ,MAAMK,eAAN,MAA2B,MAA3B,IAAqCJ,OAAOK,WAAP,GAAqBF,OAA9D,EAAuE;AACnE,eAAO,MAAP;AACH;AACD,WAAOH,OAAOE,QAAP,GAAkBC,OAAlB,GAA4B,MAA5B,GAAqC,KAA5C;AACH;;AAEc,SAASN,qBAAT,CAA+BS,oBAA/B,EAAqD;AAChE,WAAO;AACHC,kBAAU,GADP;AAEHC,eAAO;AACHC,mBAAO,GADJ;AAEHV,mBAAO,GAFJ;AAGHW,mBAAO,GAHJ;AAIHC,uBAAW;AAJR,SAFJ;AAQHC,cAAM;AACFC,iBAAK,aAASL,KAAT,EAAgB;AACjB,oBAAMT,QAAQS,MAAMT,KAAN,EAAd;AACA,oBAAIe,kBAAkBf,MAAMgB,YAAN,GAAqBC,IAArB,EAAtB;AACA,oBAAIC,gBAAgBX,uBAAuBY,SAAvB,CAAiCJ,eAAjC,CAApB;AACA,oBAAIK,cAAcX,MAAMC,KAAN,GAAcW,MAAd,CAAqBrB,MAAMiB,IAAN,EAArB,CAAlB;AACAR,sBAAMa,KAAN,GAAcvB,uBAAuBC,KAAvB,EAA8BkB,aAA9B,CAAd;AACAT,sBAAMc,WAAN,GAAoB;AAChBtB,4BAAQc,eADQ;AAEhBS,wBAAIJ;AAFY,iBAApB;AAIAX,sBAAMT,KAAN,GAAcA,KAAd;AACH;AAZC,SARH;AAsBHyB,kBAAU;AAtBP,KAAP;AAwBH;;AAED3B,sBAAsB4B,OAAtB,GAAgC,CAAC,sBAAD,CAAhC","file":"maReferenceLinkColumn.js","sourcesContent":["function getDetailLinkRouteName(field, entity) {\n    if (entity.isReadOnly) {\n        return entity.showView().enabled ? 'show' : false;\n    }\n    if (field.detailLinkRoute() == 'edit' && entity.editionView().enabled) {\n        return 'edit';\n    }\n    return entity.showView().enabled ? 'show' : false;\n}\n\nexport default function maReferenceLinkColumn(NgAdminConfiguration) {\n    return {\n        restrict: 'E',\n        scope: {\n            entry: '&',\n            field: '&',\n            value: '&',\n            datastore: '&'\n        },\n        link: {\n            pre: function(scope) {\n                const field = scope.field();\n                var referenceEntity = field.targetEntity().name();\n                var relatedEntity = NgAdminConfiguration().getEntity(referenceEntity);\n                var referenceId = scope.entry().values[field.name()];\n                scope.route = getDetailLinkRouteName(field, relatedEntity);\n                scope.stateParams = {\n                    entity: referenceEntity,\n                    id: referenceId\n                };\n                scope.field = field;\n            }\n        },\n        template: '<a ui-sref=\"{{route}}(stateParams)\"><ma-reference-column field=\"::field\" value=\"::value()\" datastore=\"::datastore()\"></ma-reference-column></a>'\n    };\n}\n\nmaReferenceLinkColumn.$inject = ['NgAdminConfiguration'];\n"]}