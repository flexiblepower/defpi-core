{"version":3,"sources":["../../../../../../../src/javascripts/test/fixtures/examples/blog/build/sinon-server.js"],"names":["sinon","isNode","module","exports","require","isAMD","define","amd","loadDependencies","div","document","createElement","hasOwn","Object","prototype","hasOwnProperty","isDOMNode","obj","success","appendChild","parentNode","e","removeChild","isElement","nodeType","isFunction","constructor","call","apply","isReallyNaN","val","isNaN","mirrorProperties","target","source","prop","isRestorable","restore","hasES5Support","makeApi","wrapMethod","object","property","method","TypeError","checkWrappedMethod","wrappedMethod","error","calledBefore","verb","returns","stackTrace","stack","owned","methodDesc","value","wrappedMethodDesc","getPropertyDescriptor","i","types","objectKeys","length","defineProperty","displayName","Error","create","proto","F","deepEqual","a","b","match","isMatcher","test","RegExp","global","ignoreCase","multiline","aString","toString","valueOf","aLength","bLength","functionName","func","name","matches","functionToString","getCall","callCount","thisValue","keys","key","push","descriptor","getOwnPropertyDescriptor","getPrototypeOf","getConfig","custom","config","defaults","defaultConfig","injectIntoThis","injectInto","properties","useFakeTimers","useFakeServer","timesInWords","count","calledInOrder","spies","l","called","orderByFirstCall","sort","aCall","bCall","aId","callId","bId","createStubInstance","stub","hasDontEnumBug","toLocaleString","isPrototypeOf","propertyIsEnumerable","unique","result","join","extend","sources","Array","slice","arguments","Event","type","bubbles","cancelable","initEvent","stopPropagation","preventDefault","defaultPrevented","ProgressEvent","progressEventRaw","loaded","total","lengthComputable","CustomEvent","customData","detail","EventTarget","addEventListener","event","listener","eventListeners","removeEventListener","listeners","splice","dispatchEvent","handleEvent","realSetTimeout","setTimeout","log","logError","label","err","msg","message","timeout","xdr","XDomainRequest","GlobalXDomainRequest","supportsXDR","workingXDR","FakeXDomainRequest","readyState","UNSENT","requestBody","requestHeaders","status","onCreate","verifyState","OPENED","sendFlag","verifyRequestSent","DONE","verifyResponseBodyType","body","open","url","responseText","readyStateChange","state","eventName","LOADING","isTimeout","errorFlag","send","data","onSend","abort","aborted","setResponseBody","chunkSize","index","substring","respond","contentType","simulatetimeout","undefined","useFakeXDomainRequest","keepOnCreate","supportsProgress","supportsCustomEvent","sinonXhr","XMLHttpRequest","GlobalXMLHttpRequest","GlobalActiveXObject","ActiveXObject","supportsActiveX","supportsXHR","workingXHR","supportsCORS","unsafeHeaders","Connection","Cookie","Cookie2","Date","Expect","Host","Referer","TE","Trailer","Upgrade","Via","FakeXMLHttpRequest","statusText","upload","UploadProgress","withCredentials","xhr","events","progress","load","getHeader","headers","header","toLowerCase","h","each","collection","callback","some","args","filters","addFilter","fn","IE6Re","defake","fakeXhr","xhrArgs","copyAttrs","attr","navigator","userAgent","stateChange","HEADERS_RECEIVED","onreadystatechange","handler","useFilters","verifyRequestOpened","verifyHeadersReceived","async","parseXML","text","xmlDoc","DOMParser","parser","parseFromString","loadXML","statusCodes","username","password","responseXML","filter","setRequestHeader","setResponseHeaders","responseHeaders","split","FormData","onerror","getResponseHeader","getAllResponseHeaders","uploadProgress","downloadProgress","uploadError","useFakeXMLHttpRequest","objId","formatio","valueFormatter","getFormatioFormatter","formatter","configure","quoteStrings","limitChildrenCount","format","ascii","getNodeFormatter","util","inspect","responseArray","response","wloc","window","location","rCurrLoc","protocol","host","matchOne","reqMethod","reqUrl","rmeth","matchMethod","matchUrl","request","requestUrl","replace","getHTTPMethod","ru","concat","exec","fakeServer","server","requests","xhrObj","addRequest","handleRequest","respondImmediately","autoRespond","responding","autoRespondAfter","fakeHTTPMethods","queue","processRequest","str","respondWith","responses","shift","lol","llx","lolex","now","methods","clock","install","uninstall","createClock","timers","clearTimeout","setImmediate","clearImmediate","setInterval","clearInterval","epxorts","Server","fakeServerWithClock","resetClock","longestTimeout","clockSetTimeout","clockSetInterval","Math","max","returnVal","tick"],"mappings":"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","file":"sinon-server.js","sourcesContent":["/**\n * Sinon.JS 1.14.1, 2015/03/16\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @author Contributors: https://github.com/cjohansen/Sinon.JS/blob/master/AUTHORS\n *\n * (The BSD License)\n * \n * Copyright (c) 2010-2014, Christian Johansen, christian@cjohansen.no\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n *     * Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright notice,\n *       this list of conditions and the following disclaimer in the documentation\n *       and/or other materials provided with the distribution.\n *     * Neither the name of Christian Johansen nor the names of his contributors\n *       may be used to endorse or promote products derived from this software\n *       without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Sinon core utilities. For internal use only.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nvar sinon = (function () {\n\"use strict\";\n\n    var sinon;\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        sinon = module.exports = require(\"./sinon/util/core\");\n        require(\"./sinon/extend\");\n        require(\"./sinon/typeOf\");\n        require(\"./sinon/times_in_words\");\n        require(\"./sinon/spy\");\n        require(\"./sinon/call\");\n        require(\"./sinon/behavior\");\n        require(\"./sinon/stub\");\n        require(\"./sinon/mock\");\n        require(\"./sinon/collection\");\n        require(\"./sinon/assert\");\n        require(\"./sinon/sandbox\");\n        require(\"./sinon/test\");\n        require(\"./sinon/test_case\");\n        require(\"./sinon/match\");\n        require(\"./sinon/format\");\n        require(\"./sinon/log_error\");\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n        sinon = module.exports;\n    } else {\n        sinon = {};\n    }\n\n    return sinon;\n}());\n\n/**\n * @depend ../../sinon.js\n */\n/**\n * Sinon core utilities. For internal use only.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var div = typeof document != \"undefined\" && document.createElement(\"div\");\n    var hasOwn = Object.prototype.hasOwnProperty;\n\n    function isDOMNode(obj) {\n        var success = false;\n\n        try {\n            obj.appendChild(div);\n            success = div.parentNode == obj;\n        } catch (e) {\n            return false;\n        } finally {\n            try {\n                obj.removeChild(div);\n            } catch (e) {\n                // Remove failed, not much we can do about that\n            }\n        }\n\n        return success;\n    }\n\n    function isElement(obj) {\n        return div && obj && obj.nodeType === 1 && isDOMNode(obj);\n    }\n\n    function isFunction(obj) {\n        return typeof obj === \"function\" || !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n\n    function isReallyNaN(val) {\n        return typeof val === \"number\" && isNaN(val);\n    }\n\n    function mirrorProperties(target, source) {\n        for (var prop in source) {\n            if (!hasOwn.call(target, prop)) {\n                target[prop] = source[prop];\n            }\n        }\n    }\n\n    function isRestorable(obj) {\n        return typeof obj === \"function\" && typeof obj.restore === \"function\" && obj.restore.sinon;\n    }\n\n    // Cheap way to detect if we have ES5 support.\n    var hasES5Support = \"keys\" in Object;\n\n    function makeApi(sinon) {\n        sinon.wrapMethod = function wrapMethod(object, property, method) {\n            if (!object) {\n                throw new TypeError(\"Should wrap property of object\");\n            }\n\n            if (typeof method != \"function\" && typeof method != \"object\") {\n                throw new TypeError(\"Method wrapper should be a function or a property descriptor\");\n            }\n\n            function checkWrappedMethod(wrappedMethod) {\n                if (!isFunction(wrappedMethod)) {\n                    error = new TypeError(\"Attempted to wrap \" + (typeof wrappedMethod) + \" property \" +\n                                        property + \" as function\");\n                } else if (wrappedMethod.restore && wrappedMethod.restore.sinon) {\n                    error = new TypeError(\"Attempted to wrap \" + property + \" which is already wrapped\");\n                } else if (wrappedMethod.calledBefore) {\n                    var verb = !!wrappedMethod.returns ? \"stubbed\" : \"spied on\";\n                    error = new TypeError(\"Attempted to wrap \" + property + \" which is already \" + verb);\n                }\n\n                if (error) {\n                    if (wrappedMethod && wrappedMethod.stackTrace) {\n                        error.stack += \"\\n--------------\\n\" + wrappedMethod.stackTrace;\n                    }\n                    throw error;\n                }\n            }\n\n            var error, wrappedMethod;\n\n            // IE 8 does not support hasOwnProperty on the window object and Firefox has a problem\n            // when using hasOwn.call on objects from other frames.\n            var owned = object.hasOwnProperty ? object.hasOwnProperty(property) : hasOwn.call(object, property);\n\n            if (hasES5Support) {\n                var methodDesc = (typeof method == \"function\") ? {value: method} : method,\n                    wrappedMethodDesc = sinon.getPropertyDescriptor(object, property),\n                    i;\n\n                if (!wrappedMethodDesc) {\n                    error = new TypeError(\"Attempted to wrap \" + (typeof wrappedMethod) + \" property \" +\n                                        property + \" as function\");\n                } else if (wrappedMethodDesc.restore && wrappedMethodDesc.restore.sinon) {\n                    error = new TypeError(\"Attempted to wrap \" + property + \" which is already wrapped\");\n                }\n                if (error) {\n                    if (wrappedMethodDesc && wrappedMethodDesc.stackTrace) {\n                        error.stack += \"\\n--------------\\n\" + wrappedMethodDesc.stackTrace;\n                    }\n                    throw error;\n                }\n\n                var types = sinon.objectKeys(methodDesc);\n                for (i = 0; i < types.length; i++) {\n                    wrappedMethod = wrappedMethodDesc[types[i]];\n                    checkWrappedMethod(wrappedMethod);\n                }\n\n                mirrorProperties(methodDesc, wrappedMethodDesc);\n                for (i = 0; i < types.length; i++) {\n                    mirrorProperties(methodDesc[types[i]], wrappedMethodDesc[types[i]]);\n                }\n                Object.defineProperty(object, property, methodDesc);\n            } else {\n                wrappedMethod = object[property];\n                checkWrappedMethod(wrappedMethod);\n                object[property] = method;\n                method.displayName = property;\n            }\n\n            method.displayName = property;\n\n            // Set up a stack trace which can be used later to find what line of\n            // code the original method was created on.\n            method.stackTrace = (new Error(\"Stack Trace for original\")).stack;\n\n            method.restore = function () {\n                // For prototype properties try to reset by delete first.\n                // If this fails (ex: localStorage on mobile safari) then force a reset\n                // via direct assignment.\n                if (!owned) {\n                    try {\n                        delete object[property];\n                    } catch (e) {}\n                    // For native code functions `delete` fails without throwing an error\n                    // on Chrome < 43, PhantomJS, etc.\n                    // Use strict equality comparison to check failures then force a reset\n                    // via direct assignment.\n                    if (object[property] === method) {\n                        object[property] = wrappedMethod;\n                    }\n                } else if (hasES5Support) {\n                    Object.defineProperty(object, property, wrappedMethodDesc);\n                }\n\n                if (!hasES5Support && object[property] === method) {\n                    object[property] = wrappedMethod;\n                }\n            };\n\n            method.restore.sinon = true;\n\n            if (!hasES5Support) {\n                mirrorProperties(method, wrappedMethod);\n            }\n\n            return method;\n        };\n\n        sinon.create = function create(proto) {\n            var F = function () {};\n            F.prototype = proto;\n            return new F();\n        };\n\n        sinon.deepEqual = function deepEqual(a, b) {\n            if (sinon.match && sinon.match.isMatcher(a)) {\n                return a.test(b);\n            }\n\n            if (typeof a != \"object\" || typeof b != \"object\") {\n                if (isReallyNaN(a) && isReallyNaN(b)) {\n                    return true;\n                } else {\n                    return a === b;\n                }\n            }\n\n            if (isElement(a) || isElement(b)) {\n                return a === b;\n            }\n\n            if (a === b) {\n                return true;\n            }\n\n            if ((a === null && b !== null) || (a !== null && b === null)) {\n                return false;\n            }\n\n            if (a instanceof RegExp && b instanceof RegExp) {\n                return (a.source === b.source) && (a.global === b.global) &&\n                    (a.ignoreCase === b.ignoreCase) && (a.multiline === b.multiline);\n            }\n\n            var aString = Object.prototype.toString.call(a);\n            if (aString != Object.prototype.toString.call(b)) {\n                return false;\n            }\n\n            if (aString == \"[object Date]\") {\n                return a.valueOf() === b.valueOf();\n            }\n\n            var prop, aLength = 0, bLength = 0;\n\n            if (aString == \"[object Array]\" && a.length !== b.length) {\n                return false;\n            }\n\n            for (prop in a) {\n                aLength += 1;\n\n                if (!(prop in b)) {\n                    return false;\n                }\n\n                if (!deepEqual(a[prop], b[prop])) {\n                    return false;\n                }\n            }\n\n            for (prop in b) {\n                bLength += 1;\n            }\n\n            return aLength == bLength;\n        };\n\n        sinon.functionName = function functionName(func) {\n            var name = func.displayName || func.name;\n\n            // Use function decomposition as a last resort to get function\n            // name. Does not rely on function decomposition to work - if it\n            // doesn't debugging will be slightly less informative\n            // (i.e. toString will say 'spy' rather than 'myFunc').\n            if (!name) {\n                var matches = func.toString().match(/function ([^\\s\\(]+)/);\n                name = matches && matches[1];\n            }\n\n            return name;\n        };\n\n        sinon.functionToString = function toString() {\n            if (this.getCall && this.callCount) {\n                var thisValue, prop, i = this.callCount;\n\n                while (i--) {\n                    thisValue = this.getCall(i).thisValue;\n\n                    for (prop in thisValue) {\n                        if (thisValue[prop] === this) {\n                            return prop;\n                        }\n                    }\n                }\n            }\n\n            return this.displayName || \"sinon fake\";\n        };\n\n        sinon.objectKeys = function objectKeys(obj) {\n            if (obj !== Object(obj)) {\n                throw new TypeError(\"sinon.objectKeys called on a non-object\");\n            }\n\n            var keys = [];\n            var key;\n            for (key in obj) {\n                if (hasOwn.call(obj, key)) {\n                    keys.push(key);\n                }\n            }\n\n            return keys;\n        };\n\n        sinon.getPropertyDescriptor = function getPropertyDescriptor(object, property) {\n            var proto = object, descriptor;\n            while (proto && !(descriptor = Object.getOwnPropertyDescriptor(proto, property))) {\n                proto = Object.getPrototypeOf(proto);\n            }\n            return descriptor;\n        }\n\n        sinon.getConfig = function (custom) {\n            var config = {};\n            custom = custom || {};\n            var defaults = sinon.defaultConfig;\n\n            for (var prop in defaults) {\n                if (defaults.hasOwnProperty(prop)) {\n                    config[prop] = custom.hasOwnProperty(prop) ? custom[prop] : defaults[prop];\n                }\n            }\n\n            return config;\n        };\n\n        sinon.defaultConfig = {\n            injectIntoThis: true,\n            injectInto: null,\n            properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n            useFakeTimers: true,\n            useFakeServer: true\n        };\n\n        sinon.timesInWords = function timesInWords(count) {\n            return count == 1 && \"once\" ||\n                count == 2 && \"twice\" ||\n                count == 3 && \"thrice\" ||\n                (count || 0) + \" times\";\n        };\n\n        sinon.calledInOrder = function (spies) {\n            for (var i = 1, l = spies.length; i < l; i++) {\n                if (!spies[i - 1].calledBefore(spies[i]) || !spies[i].called) {\n                    return false;\n                }\n            }\n\n            return true;\n        };\n\n        sinon.orderByFirstCall = function (spies) {\n            return spies.sort(function (a, b) {\n                // uuid, won't ever be equal\n                var aCall = a.getCall(0);\n                var bCall = b.getCall(0);\n                var aId = aCall && aCall.callId || -1;\n                var bId = bCall && bCall.callId || -1;\n\n                return aId < bId ? -1 : 1;\n            });\n        };\n\n        sinon.createStubInstance = function (constructor) {\n            if (typeof constructor !== \"function\") {\n                throw new TypeError(\"The constructor should be a function.\");\n            }\n            return sinon.stub(sinon.create(constructor.prototype));\n        };\n\n        sinon.restore = function (object) {\n            if (object !== null && typeof object === \"object\") {\n                for (var prop in object) {\n                    if (isRestorable(object[prop])) {\n                        object[prop].restore();\n                    }\n                }\n            } else if (isRestorable(object)) {\n                object.restore();\n            }\n        };\n\n        return sinon;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports) {\n        makeApi(exports);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports);\n    } else if (!sinon) {\n        return;\n    } else {\n        makeApi(sinon);\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend util/core.js\n */\n\n(function (sinon) {\n    function makeApi(sinon) {\n\n        // Adapted from https://developer.mozilla.org/en/docs/ECMAScript_DontEnum_attribute#JScript_DontEnum_Bug\n        var hasDontEnumBug = (function () {\n            var obj = {\n                constructor: function () {\n                    return \"0\";\n                },\n                toString: function () {\n                    return \"1\";\n                },\n                valueOf: function () {\n                    return \"2\";\n                },\n                toLocaleString: function () {\n                    return \"3\";\n                },\n                prototype: function () {\n                    return \"4\";\n                },\n                isPrototypeOf: function () {\n                    return \"5\";\n                },\n                propertyIsEnumerable: function () {\n                    return \"6\";\n                },\n                hasOwnProperty: function () {\n                    return \"7\";\n                },\n                length: function () {\n                    return \"8\";\n                },\n                unique: function () {\n                    return \"9\"\n                }\n            };\n\n            var result = [];\n            for (var prop in obj) {\n                result.push(obj[prop]());\n            }\n            return result.join(\"\") !== \"0123456789\";\n        })();\n\n        /* Public: Extend target in place with all (own) properties from sources in-order. Thus, last source will\n         *         override properties in previous sources.\n         *\n         * target - The Object to extend\n         * sources - Objects to copy properties from.\n         *\n         * Returns the extended target\n         */\n        function extend(target /*, sources */) {\n            var sources = Array.prototype.slice.call(arguments, 1),\n                source, i, prop;\n\n            for (i = 0; i < sources.length; i++) {\n                source = sources[i];\n\n                for (prop in source) {\n                    if (source.hasOwnProperty(prop)) {\n                        target[prop] = source[prop];\n                    }\n                }\n\n                // Make sure we copy (own) toString method even when in JScript with DontEnum bug\n                // See https://developer.mozilla.org/en/docs/ECMAScript_DontEnum_attribute#JScript_DontEnum_Bug\n                if (hasDontEnumBug && source.hasOwnProperty(\"toString\") && source.toString !== target.toString) {\n                    target.toString = source.toString;\n                }\n            }\n\n            return target;\n        };\n\n        sinon.extend = extend;\n        return sinon.extend;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        module.exports = makeApi(sinon);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else if (!sinon) {\n        return;\n    } else {\n        makeApi(sinon);\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * Minimal Event interface implementation\n *\n * Original implementation by Sven Fuchs: https://gist.github.com/995028\n * Modifications and tests by Christian Johansen.\n *\n * @author Sven Fuchs (svenfuchs@artweb-design.de)\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2011 Sven Fuchs, Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    this.sinon = {};\n}\n\n(function () {\n    var push = [].push;\n\n    function makeApi(sinon) {\n        sinon.Event = function Event(type, bubbles, cancelable, target) {\n            this.initEvent(type, bubbles, cancelable, target);\n        };\n\n        sinon.Event.prototype = {\n            initEvent: function (type, bubbles, cancelable, target) {\n                this.type = type;\n                this.bubbles = bubbles;\n                this.cancelable = cancelable;\n                this.target = target;\n            },\n\n            stopPropagation: function () {},\n\n            preventDefault: function () {\n                this.defaultPrevented = true;\n            }\n        };\n\n        sinon.ProgressEvent = function ProgressEvent(type, progressEventRaw, target) {\n            this.initEvent(type, false, false, target);\n            this.loaded = progressEventRaw.loaded || null;\n            this.total = progressEventRaw.total || null;\n            this.lengthComputable = !!progressEventRaw.total;\n        };\n\n        sinon.ProgressEvent.prototype = new sinon.Event();\n\n        sinon.ProgressEvent.prototype.constructor =  sinon.ProgressEvent;\n\n        sinon.CustomEvent = function CustomEvent(type, customData, target) {\n            this.initEvent(type, false, false, target);\n            this.detail = customData.detail || null;\n        };\n\n        sinon.CustomEvent.prototype = new sinon.Event();\n\n        sinon.CustomEvent.prototype.constructor =  sinon.CustomEvent;\n\n        sinon.EventTarget = {\n            addEventListener: function addEventListener(event, listener) {\n                this.eventListeners = this.eventListeners || {};\n                this.eventListeners[event] = this.eventListeners[event] || [];\n                push.call(this.eventListeners[event], listener);\n            },\n\n            removeEventListener: function removeEventListener(event, listener) {\n                var listeners = this.eventListeners && this.eventListeners[event] || [];\n\n                for (var i = 0, l = listeners.length; i < l; ++i) {\n                    if (listeners[i] == listener) {\n                        return listeners.splice(i, 1);\n                    }\n                }\n            },\n\n            dispatchEvent: function dispatchEvent(event) {\n                var type = event.type;\n                var listeners = this.eventListeners && this.eventListeners[type] || [];\n\n                for (var i = 0; i < listeners.length; i++) {\n                    if (typeof listeners[i] == \"function\") {\n                        listeners[i].call(this, event);\n                    } else {\n                        listeners[i].handleEvent(event);\n                    }\n                }\n\n                return !!event.defaultPrevented;\n            }\n        };\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require) {\n        var sinon = require(\"./core\");\n        makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require);\n    } else {\n        makeApi(sinon);\n    }\n}());\n\n/**\n * @depend util/core.js\n */\n/**\n * Logs errors\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2014 Christian Johansen\n */\n\n(function (sinon) {\n    // cache a reference to setTimeout, so that our reference won't be stubbed out\n    // when using fake timers and errors will still get logged\n    // https://github.com/cjohansen/Sinon.JS/issues/381\n    var realSetTimeout = setTimeout;\n\n    function makeApi(sinon) {\n\n        function log() {}\n\n        function logError(label, err) {\n            var msg = label + \" threw exception: \";\n\n            sinon.log(msg + \"[\" + err.name + \"] \" + err.message);\n\n            if (err.stack) {\n                sinon.log(err.stack);\n            }\n\n            logError.setTimeout(function () {\n                err.message = msg + err.message;\n                throw err;\n            }, 0);\n        };\n\n        // wrap realSetTimeout with something we can stub in tests\n        logError.setTimeout = function (func, timeout) {\n            realSetTimeout(func, timeout);\n        }\n\n        var exports = {};\n        exports.log = sinon.log = log;\n        exports.logError = sinon.logError = logError;\n\n        return exports;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        module.exports = makeApi(sinon);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else if (!sinon) {\n        return;\n    } else {\n        makeApi(sinon);\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend core.js\n * @depend ../extend.js\n * @depend event.js\n * @depend ../log_error.js\n */\n/**\n * Fake XDomainRequest object\n */\n\nif (typeof sinon == \"undefined\") {\n    this.sinon = {};\n}\n\n// wrapper for global\n(function (global) {\n    var xdr = { XDomainRequest: global.XDomainRequest };\n    xdr.GlobalXDomainRequest = global.XDomainRequest;\n    xdr.supportsXDR = typeof xdr.GlobalXDomainRequest != \"undefined\";\n    xdr.workingXDR = xdr.supportsXDR ? xdr.GlobalXDomainRequest :  false;\n\n    function makeApi(sinon) {\n        sinon.xdr = xdr;\n\n        function FakeXDomainRequest() {\n            this.readyState = FakeXDomainRequest.UNSENT;\n            this.requestBody = null;\n            this.requestHeaders = {};\n            this.status = 0;\n            this.timeout = null;\n\n            if (typeof FakeXDomainRequest.onCreate == \"function\") {\n                FakeXDomainRequest.onCreate(this);\n            }\n        }\n\n        function verifyState(xdr) {\n            if (xdr.readyState !== FakeXDomainRequest.OPENED) {\n                throw new Error(\"INVALID_STATE_ERR\");\n            }\n\n            if (xdr.sendFlag) {\n                throw new Error(\"INVALID_STATE_ERR\");\n            }\n        }\n\n        function verifyRequestSent(xdr) {\n            if (xdr.readyState == FakeXDomainRequest.UNSENT) {\n                throw new Error(\"Request not sent\");\n            }\n            if (xdr.readyState == FakeXDomainRequest.DONE) {\n                throw new Error(\"Request done\");\n            }\n        }\n\n        function verifyResponseBodyType(body) {\n            if (typeof body != \"string\") {\n                var error = new Error(\"Attempted to respond to fake XDomainRequest with \" +\n                                    body + \", which is not a string.\");\n                error.name = \"InvalidBodyException\";\n                throw error;\n            }\n        }\n\n        sinon.extend(FakeXDomainRequest.prototype, sinon.EventTarget, {\n            open: function open(method, url) {\n                this.method = method;\n                this.url = url;\n\n                this.responseText = null;\n                this.sendFlag = false;\n\n                this.readyStateChange(FakeXDomainRequest.OPENED);\n            },\n\n            readyStateChange: function readyStateChange(state) {\n                this.readyState = state;\n                var eventName = \"\";\n                switch (this.readyState) {\n                case FakeXDomainRequest.UNSENT:\n                    break;\n                case FakeXDomainRequest.OPENED:\n                    break;\n                case FakeXDomainRequest.LOADING:\n                    if (this.sendFlag) {\n                        //raise the progress event\n                        eventName = \"onprogress\";\n                    }\n                    break;\n                case FakeXDomainRequest.DONE:\n                    if (this.isTimeout) {\n                        eventName = \"ontimeout\"\n                    } else if (this.errorFlag || (this.status < 200 || this.status > 299)) {\n                        eventName = \"onerror\";\n                    } else {\n                        eventName = \"onload\"\n                    }\n                    break;\n                }\n\n                // raising event (if defined)\n                if (eventName) {\n                    if (typeof this[eventName] == \"function\") {\n                        try {\n                            this[eventName]();\n                        } catch (e) {\n                            sinon.logError(\"Fake XHR \" + eventName + \" handler\", e);\n                        }\n                    }\n                }\n            },\n\n            send: function send(data) {\n                verifyState(this);\n\n                if (!/^(get|head)$/i.test(this.method)) {\n                    this.requestBody = data;\n                }\n                this.requestHeaders[\"Content-Type\"] = \"text/plain;charset=utf-8\";\n\n                this.errorFlag = false;\n                this.sendFlag = true;\n                this.readyStateChange(FakeXDomainRequest.OPENED);\n\n                if (typeof this.onSend == \"function\") {\n                    this.onSend(this);\n                }\n            },\n\n            abort: function abort() {\n                this.aborted = true;\n                this.responseText = null;\n                this.errorFlag = true;\n\n                if (this.readyState > sinon.FakeXDomainRequest.UNSENT && this.sendFlag) {\n                    this.readyStateChange(sinon.FakeXDomainRequest.DONE);\n                    this.sendFlag = false;\n                }\n            },\n\n            setResponseBody: function setResponseBody(body) {\n                verifyRequestSent(this);\n                verifyResponseBodyType(body);\n\n                var chunkSize = this.chunkSize || 10;\n                var index = 0;\n                this.responseText = \"\";\n\n                do {\n                    this.readyStateChange(FakeXDomainRequest.LOADING);\n                    this.responseText += body.substring(index, index + chunkSize);\n                    index += chunkSize;\n                } while (index < body.length);\n\n                this.readyStateChange(FakeXDomainRequest.DONE);\n            },\n\n            respond: function respond(status, contentType, body) {\n                // content-type ignored, since XDomainRequest does not carry this\n                // we keep the same syntax for respond(...) as for FakeXMLHttpRequest to ease\n                // test integration across browsers\n                this.status = typeof status == \"number\" ? status : 200;\n                this.setResponseBody(body || \"\");\n            },\n\n            simulatetimeout: function simulatetimeout() {\n                this.status = 0;\n                this.isTimeout = true;\n                // Access to this should actually throw an error\n                this.responseText = undefined;\n                this.readyStateChange(FakeXDomainRequest.DONE);\n            }\n        });\n\n        sinon.extend(FakeXDomainRequest, {\n            UNSENT: 0,\n            OPENED: 1,\n            LOADING: 3,\n            DONE: 4\n        });\n\n        sinon.useFakeXDomainRequest = function useFakeXDomainRequest() {\n            sinon.FakeXDomainRequest.restore = function restore(keepOnCreate) {\n                if (xdr.supportsXDR) {\n                    global.XDomainRequest = xdr.GlobalXDomainRequest;\n                }\n\n                delete sinon.FakeXDomainRequest.restore;\n\n                if (keepOnCreate !== true) {\n                    delete sinon.FakeXDomainRequest.onCreate;\n                }\n            };\n            if (xdr.supportsXDR) {\n                global.XDomainRequest = sinon.FakeXDomainRequest;\n            }\n            return sinon.FakeXDomainRequest;\n        };\n\n        sinon.FakeXDomainRequest = FakeXDomainRequest;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./core\");\n        require(\"../extend\");\n        require(\"./event\");\n        require(\"../log_error\");\n        makeApi(sinon);\n        module.exports = sinon;\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else {\n        makeApi(sinon);\n    }\n})(this);\n\n/**\n * @depend core.js\n * @depend ../extend.js\n * @depend event.js\n * @depend ../log_error.js\n */\n/**\n * Fake XMLHttpRequest object\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (global) {\n\n    var supportsProgress = typeof ProgressEvent !== \"undefined\";\n    var supportsCustomEvent = typeof CustomEvent !== \"undefined\";\n    var sinonXhr = { XMLHttpRequest: global.XMLHttpRequest };\n    sinonXhr.GlobalXMLHttpRequest = global.XMLHttpRequest;\n    sinonXhr.GlobalActiveXObject = global.ActiveXObject;\n    sinonXhr.supportsActiveX = typeof sinonXhr.GlobalActiveXObject != \"undefined\";\n    sinonXhr.supportsXHR = typeof sinonXhr.GlobalXMLHttpRequest != \"undefined\";\n    sinonXhr.workingXHR = sinonXhr.supportsXHR ? sinonXhr.GlobalXMLHttpRequest : sinonXhr.supportsActiveX\n                                     ? function () { return new sinonXhr.GlobalActiveXObject(\"MSXML2.XMLHTTP.3.0\") } : false;\n    sinonXhr.supportsCORS = sinonXhr.supportsXHR && \"withCredentials\" in (new sinonXhr.GlobalXMLHttpRequest());\n\n    /*jsl:ignore*/\n    var unsafeHeaders = {\n        \"Accept-Charset\": true,\n        \"Accept-Encoding\": true,\n        Connection: true,\n        \"Content-Length\": true,\n        Cookie: true,\n        Cookie2: true,\n        \"Content-Transfer-Encoding\": true,\n        Date: true,\n        Expect: true,\n        Host: true,\n        \"Keep-Alive\": true,\n        Referer: true,\n        TE: true,\n        Trailer: true,\n        \"Transfer-Encoding\": true,\n        Upgrade: true,\n        \"User-Agent\": true,\n        Via: true\n    };\n    /*jsl:end*/\n\n    function FakeXMLHttpRequest() {\n        this.readyState = FakeXMLHttpRequest.UNSENT;\n        this.requestHeaders = {};\n        this.requestBody = null;\n        this.status = 0;\n        this.statusText = \"\";\n        this.upload = new UploadProgress();\n        if (sinonXhr.supportsCORS) {\n            this.withCredentials = false;\n        }\n\n        var xhr = this;\n        var events = [\"loadstart\", \"load\", \"abort\", \"loadend\"];\n\n        function addEventListener(eventName) {\n            xhr.addEventListener(eventName, function (event) {\n                var listener = xhr[\"on\" + eventName];\n\n                if (listener && typeof listener == \"function\") {\n                    listener.call(this, event);\n                }\n            });\n        }\n\n        for (var i = events.length - 1; i >= 0; i--) {\n            addEventListener(events[i]);\n        }\n\n        if (typeof FakeXMLHttpRequest.onCreate == \"function\") {\n            FakeXMLHttpRequest.onCreate(this);\n        }\n    }\n\n    // An upload object is created for each\n    // FakeXMLHttpRequest and allows upload\n    // events to be simulated using uploadProgress\n    // and uploadError.\n    function UploadProgress() {\n        this.eventListeners = {\n            progress: [],\n            load: [],\n            abort: [],\n            error: []\n        }\n    }\n\n    UploadProgress.prototype.addEventListener = function addEventListener(event, listener) {\n        this.eventListeners[event].push(listener);\n    };\n\n    UploadProgress.prototype.removeEventListener = function removeEventListener(event, listener) {\n        var listeners = this.eventListeners[event] || [];\n\n        for (var i = 0, l = listeners.length; i < l; ++i) {\n            if (listeners[i] == listener) {\n                return listeners.splice(i, 1);\n            }\n        }\n    };\n\n    UploadProgress.prototype.dispatchEvent = function dispatchEvent(event) {\n        var listeners = this.eventListeners[event.type] || [];\n\n        for (var i = 0, listener; (listener = listeners[i]) != null; i++) {\n            listener(event);\n        }\n    };\n\n    function verifyState(xhr) {\n        if (xhr.readyState !== FakeXMLHttpRequest.OPENED) {\n            throw new Error(\"INVALID_STATE_ERR\");\n        }\n\n        if (xhr.sendFlag) {\n            throw new Error(\"INVALID_STATE_ERR\");\n        }\n    }\n\n    function getHeader(headers, header) {\n        header = header.toLowerCase();\n\n        for (var h in headers) {\n            if (h.toLowerCase() == header) {\n                return h;\n            }\n        }\n\n        return null;\n    }\n\n    // filtering to enable a white-list version of Sinon FakeXhr,\n    // where whitelisted requests are passed through to real XHR\n    function each(collection, callback) {\n        if (!collection) {\n            return;\n        }\n\n        for (var i = 0, l = collection.length; i < l; i += 1) {\n            callback(collection[i]);\n        }\n    }\n    function some(collection, callback) {\n        for (var index = 0; index < collection.length; index++) {\n            if (callback(collection[index]) === true) {\n                return true;\n            }\n        }\n        return false;\n    }\n    // largest arity in XHR is 5 - XHR#open\n    var apply = function (obj, method, args) {\n        switch (args.length) {\n        case 0: return obj[method]();\n        case 1: return obj[method](args[0]);\n        case 2: return obj[method](args[0], args[1]);\n        case 3: return obj[method](args[0], args[1], args[2]);\n        case 4: return obj[method](args[0], args[1], args[2], args[3]);\n        case 5: return obj[method](args[0], args[1], args[2], args[3], args[4]);\n        }\n    };\n\n    FakeXMLHttpRequest.filters = [];\n    FakeXMLHttpRequest.addFilter = function addFilter(fn) {\n        this.filters.push(fn)\n    };\n    var IE6Re = /MSIE 6/;\n    FakeXMLHttpRequest.defake = function defake(fakeXhr, xhrArgs) {\n        var xhr = new sinonXhr.workingXHR();\n        each([\n            \"open\",\n            \"setRequestHeader\",\n            \"send\",\n            \"abort\",\n            \"getResponseHeader\",\n            \"getAllResponseHeaders\",\n            \"addEventListener\",\n            \"overrideMimeType\",\n            \"removeEventListener\"\n        ], function (method) {\n            fakeXhr[method] = function () {\n                return apply(xhr, method, arguments);\n            };\n        });\n\n        var copyAttrs = function (args) {\n            each(args, function (attr) {\n                try {\n                    fakeXhr[attr] = xhr[attr]\n                } catch (e) {\n                    if (!IE6Re.test(navigator.userAgent)) {\n                        throw e;\n                    }\n                }\n            });\n        };\n\n        var stateChange = function stateChange() {\n            fakeXhr.readyState = xhr.readyState;\n            if (xhr.readyState >= FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                copyAttrs([\"status\", \"statusText\"]);\n            }\n            if (xhr.readyState >= FakeXMLHttpRequest.LOADING) {\n                copyAttrs([\"responseText\", \"response\"]);\n            }\n            if (xhr.readyState === FakeXMLHttpRequest.DONE) {\n                copyAttrs([\"responseXML\"]);\n            }\n            if (fakeXhr.onreadystatechange) {\n                fakeXhr.onreadystatechange.call(fakeXhr, { target: fakeXhr });\n            }\n        };\n\n        if (xhr.addEventListener) {\n            for (var event in fakeXhr.eventListeners) {\n                if (fakeXhr.eventListeners.hasOwnProperty(event)) {\n                    each(fakeXhr.eventListeners[event], function (handler) {\n                        xhr.addEventListener(event, handler);\n                    });\n                }\n            }\n            xhr.addEventListener(\"readystatechange\", stateChange);\n        } else {\n            xhr.onreadystatechange = stateChange;\n        }\n        apply(xhr, \"open\", xhrArgs);\n    };\n    FakeXMLHttpRequest.useFilters = false;\n\n    function verifyRequestOpened(xhr) {\n        if (xhr.readyState != FakeXMLHttpRequest.OPENED) {\n            throw new Error(\"INVALID_STATE_ERR - \" + xhr.readyState);\n        }\n    }\n\n    function verifyRequestSent(xhr) {\n        if (xhr.readyState == FakeXMLHttpRequest.DONE) {\n            throw new Error(\"Request done\");\n        }\n    }\n\n    function verifyHeadersReceived(xhr) {\n        if (xhr.async && xhr.readyState != FakeXMLHttpRequest.HEADERS_RECEIVED) {\n            throw new Error(\"No headers received\");\n        }\n    }\n\n    function verifyResponseBodyType(body) {\n        if (typeof body != \"string\") {\n            var error = new Error(\"Attempted to respond to fake XMLHttpRequest with \" +\n                                 body + \", which is not a string.\");\n            error.name = \"InvalidBodyException\";\n            throw error;\n        }\n    }\n\n    FakeXMLHttpRequest.parseXML = function parseXML(text) {\n        var xmlDoc;\n\n        if (typeof DOMParser != \"undefined\") {\n            var parser = new DOMParser();\n            xmlDoc = parser.parseFromString(text, \"text/xml\");\n        } else {\n            xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n            xmlDoc.async = \"false\";\n            xmlDoc.loadXML(text);\n        }\n\n        return xmlDoc;\n    };\n\n    FakeXMLHttpRequest.statusCodes = {\n        100: \"Continue\",\n        101: \"Switching Protocols\",\n        200: \"OK\",\n        201: \"Created\",\n        202: \"Accepted\",\n        203: \"Non-Authoritative Information\",\n        204: \"No Content\",\n        205: \"Reset Content\",\n        206: \"Partial Content\",\n        207: \"Multi-Status\",\n        300: \"Multiple Choice\",\n        301: \"Moved Permanently\",\n        302: \"Found\",\n        303: \"See Other\",\n        304: \"Not Modified\",\n        305: \"Use Proxy\",\n        307: \"Temporary Redirect\",\n        400: \"Bad Request\",\n        401: \"Unauthorized\",\n        402: \"Payment Required\",\n        403: \"Forbidden\",\n        404: \"Not Found\",\n        405: \"Method Not Allowed\",\n        406: \"Not Acceptable\",\n        407: \"Proxy Authentication Required\",\n        408: \"Request Timeout\",\n        409: \"Conflict\",\n        410: \"Gone\",\n        411: \"Length Required\",\n        412: \"Precondition Failed\",\n        413: \"Request Entity Too Large\",\n        414: \"Request-URI Too Long\",\n        415: \"Unsupported Media Type\",\n        416: \"Requested Range Not Satisfiable\",\n        417: \"Expectation Failed\",\n        422: \"Unprocessable Entity\",\n        500: \"Internal Server Error\",\n        501: \"Not Implemented\",\n        502: \"Bad Gateway\",\n        503: \"Service Unavailable\",\n        504: \"Gateway Timeout\",\n        505: \"HTTP Version Not Supported\"\n    };\n\n    function makeApi(sinon) {\n        sinon.xhr = sinonXhr;\n\n        sinon.extend(FakeXMLHttpRequest.prototype, sinon.EventTarget, {\n            async: true,\n\n            open: function open(method, url, async, username, password) {\n                this.method = method;\n                this.url = url;\n                this.async = typeof async == \"boolean\" ? async : true;\n                this.username = username;\n                this.password = password;\n                this.responseText = null;\n                this.responseXML = null;\n                this.requestHeaders = {};\n                this.sendFlag = false;\n\n                if (FakeXMLHttpRequest.useFilters === true) {\n                    var xhrArgs = arguments;\n                    var defake = some(FakeXMLHttpRequest.filters, function (filter) {\n                        return filter.apply(this, xhrArgs)\n                    });\n                    if (defake) {\n                        return FakeXMLHttpRequest.defake(this, arguments);\n                    }\n                }\n                this.readyStateChange(FakeXMLHttpRequest.OPENED);\n            },\n\n            readyStateChange: function readyStateChange(state) {\n                this.readyState = state;\n\n                if (typeof this.onreadystatechange == \"function\") {\n                    try {\n                        this.onreadystatechange();\n                    } catch (e) {\n                        sinon.logError(\"Fake XHR onreadystatechange handler\", e);\n                    }\n                }\n\n                this.dispatchEvent(new sinon.Event(\"readystatechange\"));\n\n                switch (this.readyState) {\n                    case FakeXMLHttpRequest.DONE:\n                        this.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                        this.dispatchEvent(new sinon.Event(\"loadend\", false, false, this));\n                        this.upload.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                        if (supportsProgress) {\n                            this.upload.dispatchEvent(new sinon.ProgressEvent(\"progress\", {loaded: 100, total: 100}));\n                            this.dispatchEvent(new sinon.ProgressEvent(\"progress\", {loaded: 100, total: 100}));\n                        }\n                        break;\n                }\n            },\n\n            setRequestHeader: function setRequestHeader(header, value) {\n                verifyState(this);\n\n                if (unsafeHeaders[header] || /^(Sec-|Proxy-)/.test(header)) {\n                    throw new Error(\"Refused to set unsafe header \\\"\" + header + \"\\\"\");\n                }\n\n                if (this.requestHeaders[header]) {\n                    this.requestHeaders[header] += \",\" + value;\n                } else {\n                    this.requestHeaders[header] = value;\n                }\n            },\n\n            // Helps testing\n            setResponseHeaders: function setResponseHeaders(headers) {\n                verifyRequestOpened(this);\n                this.responseHeaders = {};\n\n                for (var header in headers) {\n                    if (headers.hasOwnProperty(header)) {\n                        this.responseHeaders[header] = headers[header];\n                    }\n                }\n\n                if (this.async) {\n                    this.readyStateChange(FakeXMLHttpRequest.HEADERS_RECEIVED);\n                } else {\n                    this.readyState = FakeXMLHttpRequest.HEADERS_RECEIVED;\n                }\n            },\n\n            // Currently treats ALL data as a DOMString (i.e. no Document)\n            send: function send(data) {\n                verifyState(this);\n\n                if (!/^(get|head)$/i.test(this.method)) {\n                    var contentType = getHeader(this.requestHeaders, \"Content-Type\");\n                    if (this.requestHeaders[contentType]) {\n                        var value = this.requestHeaders[contentType].split(\";\");\n                        this.requestHeaders[contentType] = value[0] + \";charset=utf-8\";\n                    } else if (!(data instanceof FormData)) {\n                        this.requestHeaders[\"Content-Type\"] = \"text/plain;charset=utf-8\";\n                    }\n\n                    this.requestBody = data;\n                }\n\n                this.errorFlag = false;\n                this.sendFlag = this.async;\n                this.readyStateChange(FakeXMLHttpRequest.OPENED);\n\n                if (typeof this.onSend == \"function\") {\n                    this.onSend(this);\n                }\n\n                this.dispatchEvent(new sinon.Event(\"loadstart\", false, false, this));\n            },\n\n            abort: function abort() {\n                this.aborted = true;\n                this.responseText = null;\n                this.errorFlag = true;\n                this.requestHeaders = {};\n\n                if (this.readyState > FakeXMLHttpRequest.UNSENT && this.sendFlag) {\n                    this.readyStateChange(FakeXMLHttpRequest.DONE);\n                    this.sendFlag = false;\n                }\n\n                this.readyState = FakeXMLHttpRequest.UNSENT;\n\n                this.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n                this.upload.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n                if (typeof this.onerror === \"function\") {\n                    this.onerror();\n                }\n            },\n\n            getResponseHeader: function getResponseHeader(header) {\n                if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                    return null;\n                }\n\n                if (/^Set-Cookie2?$/i.test(header)) {\n                    return null;\n                }\n\n                header = getHeader(this.responseHeaders, header);\n\n                return this.responseHeaders[header] || null;\n            },\n\n            getAllResponseHeaders: function getAllResponseHeaders() {\n                if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                    return \"\";\n                }\n\n                var headers = \"\";\n\n                for (var header in this.responseHeaders) {\n                    if (this.responseHeaders.hasOwnProperty(header) &&\n                        !/^Set-Cookie2?$/i.test(header)) {\n                        headers += header + \": \" + this.responseHeaders[header] + \"\\r\\n\";\n                    }\n                }\n\n                return headers;\n            },\n\n            setResponseBody: function setResponseBody(body) {\n                verifyRequestSent(this);\n                verifyHeadersReceived(this);\n                verifyResponseBodyType(body);\n\n                var chunkSize = this.chunkSize || 10;\n                var index = 0;\n                this.responseText = \"\";\n\n                do {\n                    if (this.async) {\n                        this.readyStateChange(FakeXMLHttpRequest.LOADING);\n                    }\n\n                    this.responseText += body.substring(index, index + chunkSize);\n                    index += chunkSize;\n                } while (index < body.length);\n\n                var type = this.getResponseHeader(\"Content-Type\");\n\n                if (this.responseText &&\n                    (!type || /(text\\/xml)|(application\\/xml)|(\\+xml)/.test(type))) {\n                    try {\n                        this.responseXML = FakeXMLHttpRequest.parseXML(this.responseText);\n                    } catch (e) {\n                        // Unable to parse XML - no biggie\n                    }\n                }\n\n                this.readyStateChange(FakeXMLHttpRequest.DONE);\n            },\n\n            respond: function respond(status, headers, body) {\n                this.status = typeof status == \"number\" ? status : 200;\n                this.statusText = FakeXMLHttpRequest.statusCodes[this.status];\n                this.setResponseHeaders(headers || {});\n                this.setResponseBody(body || \"\");\n            },\n\n            uploadProgress: function uploadProgress(progressEventRaw) {\n                if (supportsProgress) {\n                    this.upload.dispatchEvent(new sinon.ProgressEvent(\"progress\", progressEventRaw));\n                }\n            },\n\n            downloadProgress: function downloadProgress(progressEventRaw) {\n                if (supportsProgress) {\n                    this.dispatchEvent(new sinon.ProgressEvent(\"progress\", progressEventRaw));\n                }\n            },\n\n            uploadError: function uploadError(error) {\n                if (supportsCustomEvent) {\n                    this.upload.dispatchEvent(new sinon.CustomEvent(\"error\", {detail: error}));\n                }\n            }\n        });\n\n        sinon.extend(FakeXMLHttpRequest, {\n            UNSENT: 0,\n            OPENED: 1,\n            HEADERS_RECEIVED: 2,\n            LOADING: 3,\n            DONE: 4\n        });\n\n        sinon.useFakeXMLHttpRequest = function () {\n            FakeXMLHttpRequest.restore = function restore(keepOnCreate) {\n                if (sinonXhr.supportsXHR) {\n                    global.XMLHttpRequest = sinonXhr.GlobalXMLHttpRequest;\n                }\n\n                if (sinonXhr.supportsActiveX) {\n                    global.ActiveXObject = sinonXhr.GlobalActiveXObject;\n                }\n\n                delete FakeXMLHttpRequest.restore;\n\n                if (keepOnCreate !== true) {\n                    delete FakeXMLHttpRequest.onCreate;\n                }\n            };\n            if (sinonXhr.supportsXHR) {\n                global.XMLHttpRequest = FakeXMLHttpRequest;\n            }\n\n            if (sinonXhr.supportsActiveX) {\n                global.ActiveXObject = function ActiveXObject(objId) {\n                    if (objId == \"Microsoft.XMLHTTP\" || /^Msxml2\\.XMLHTTP/i.test(objId)) {\n\n                        return new FakeXMLHttpRequest();\n                    }\n\n                    return new sinonXhr.GlobalActiveXObject(objId);\n                };\n            }\n\n            return FakeXMLHttpRequest;\n        };\n\n        sinon.FakeXMLHttpRequest = FakeXMLHttpRequest;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./core\");\n        require(\"../extend\");\n        require(\"./event\");\n        require(\"../log_error\");\n        makeApi(sinon);\n        module.exports = sinon;\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else if (typeof sinon === \"undefined\") {\n        return;\n    } else {\n        makeApi(sinon);\n    }\n\n})(typeof global !== \"undefined\" ? global : this);\n\n/**\n * @depend util/core.js\n */\n/**\n * Format functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2014 Christian Johansen\n */\n\n(function (sinon, formatio) {\n    function makeApi(sinon) {\n        function valueFormatter(value) {\n            return \"\" + value;\n        }\n\n        function getFormatioFormatter() {\n            var formatter = formatio.configure({\n                    quoteStrings: false,\n                    limitChildrenCount: 250\n                });\n\n            function format() {\n                return formatter.ascii.apply(formatter, arguments);\n            };\n\n            return format;\n        }\n\n        function getNodeFormatter(value) {\n            function format(value) {\n                return typeof value == \"object\" && value.toString === Object.prototype.toString ? util.inspect(value) : value;\n            };\n\n            try {\n                var util = require(\"util\");\n            } catch (e) {\n                /* Node, but no util module - would be very old, but better safe than sorry */\n            }\n\n            return util ? format : valueFormatter;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\",\n            formatter;\n\n        if (isNode) {\n            try {\n                formatio = require(\"formatio\");\n            } catch (e) {}\n        }\n\n        if (formatio) {\n            formatter = getFormatioFormatter()\n        } else if (isNode) {\n            formatter = getNodeFormatter();\n        } else {\n            formatter = valueFormatter;\n        }\n\n        sinon.format = formatter;\n        return sinon.format;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        module.exports = makeApi(sinon);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else if (!sinon) {\n        return;\n    } else {\n        makeApi(sinon);\n    }\n}(\n    (typeof sinon == \"object\" && sinon || null),\n    (typeof formatio == \"object\" && formatio)\n));\n\n/**\n * @depend fake_xdomain_request.js\n * @depend fake_xml_http_request.js\n * @depend ../format.js\n * @depend ../log_error.js\n */\n/**\n * The Sinon \"server\" mimics a web server that receives requests from\n * sinon.FakeXMLHttpRequest and provides an API to respond to those requests,\n * both synchronously and asynchronously. To respond synchronuously, canned\n * answers have to be provided upfront.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    var sinon = {};\n}\n\n(function () {\n    var push = [].push;\n    function F() {}\n\n    function create(proto) {\n        F.prototype = proto;\n        return new F();\n    }\n\n    function responseArray(handler) {\n        var response = handler;\n\n        if (Object.prototype.toString.call(handler) != \"[object Array]\") {\n            response = [200, {}, handler];\n        }\n\n        if (typeof response[2] != \"string\") {\n            throw new TypeError(\"Fake server response body should be string, but was \" +\n                                typeof response[2]);\n        }\n\n        return response;\n    }\n\n    var wloc = typeof window !== \"undefined\" ? window.location : {};\n    var rCurrLoc = new RegExp(\"^\" + wloc.protocol + \"//\" + wloc.host);\n\n    function matchOne(response, reqMethod, reqUrl) {\n        var rmeth = response.method;\n        var matchMethod = !rmeth || rmeth.toLowerCase() == reqMethod.toLowerCase();\n        var url = response.url;\n        var matchUrl = !url || url == reqUrl || (typeof url.test == \"function\" && url.test(reqUrl));\n\n        return matchMethod && matchUrl;\n    }\n\n    function match(response, request) {\n        var requestUrl = request.url;\n\n        if (!/^https?:\\/\\//.test(requestUrl) || rCurrLoc.test(requestUrl)) {\n            requestUrl = requestUrl.replace(rCurrLoc, \"\");\n        }\n\n        if (matchOne(response, this.getHTTPMethod(request), requestUrl)) {\n            if (typeof response.response == \"function\") {\n                var ru = response.url;\n                var args = [request].concat(ru && typeof ru.exec == \"function\" ? ru.exec(requestUrl).slice(1) : []);\n                return response.response.apply(response, args);\n            }\n\n            return true;\n        }\n\n        return false;\n    }\n\n    function makeApi(sinon) {\n        sinon.fakeServer = {\n            create: function () {\n                var server = create(this);\n                if (!sinon.xhr.supportsCORS) {\n                    this.xhr = sinon.useFakeXDomainRequest();\n                } else {\n                    this.xhr = sinon.useFakeXMLHttpRequest();\n                }\n                server.requests = [];\n\n                this.xhr.onCreate = function (xhrObj) {\n                    server.addRequest(xhrObj);\n                };\n\n                return server;\n            },\n\n            addRequest: function addRequest(xhrObj) {\n                var server = this;\n                push.call(this.requests, xhrObj);\n\n                xhrObj.onSend = function () {\n                    server.handleRequest(this);\n\n                    if (server.respondImmediately) {\n                        server.respond();\n                    } else if (server.autoRespond && !server.responding) {\n                        setTimeout(function () {\n                            server.responding = false;\n                            server.respond();\n                        }, server.autoRespondAfter || 10);\n\n                        server.responding = true;\n                    }\n                };\n            },\n\n            getHTTPMethod: function getHTTPMethod(request) {\n                if (this.fakeHTTPMethods && /post/i.test(request.method)) {\n                    var matches = (request.requestBody || \"\").match(/_method=([^\\b;]+)/);\n                    return !!matches ? matches[1] : request.method;\n                }\n\n                return request.method;\n            },\n\n            handleRequest: function handleRequest(xhr) {\n                if (xhr.async) {\n                    if (!this.queue) {\n                        this.queue = [];\n                    }\n\n                    push.call(this.queue, xhr);\n                } else {\n                    this.processRequest(xhr);\n                }\n            },\n\n            log: function log(response, request) {\n                var str;\n\n                str =  \"Request:\\n\"  + sinon.format(request)  + \"\\n\\n\";\n                str += \"Response:\\n\" + sinon.format(response) + \"\\n\\n\";\n\n                sinon.log(str);\n            },\n\n            respondWith: function respondWith(method, url, body) {\n                if (arguments.length == 1 && typeof method != \"function\") {\n                    this.response = responseArray(method);\n                    return;\n                }\n\n                if (!this.responses) { this.responses = []; }\n\n                if (arguments.length == 1) {\n                    body = method;\n                    url = method = null;\n                }\n\n                if (arguments.length == 2) {\n                    body = url;\n                    url = method;\n                    method = null;\n                }\n\n                push.call(this.responses, {\n                    method: method,\n                    url: url,\n                    response: typeof body == \"function\" ? body : responseArray(body)\n                });\n            },\n\n            respond: function respond() {\n                if (arguments.length > 0) {\n                    this.respondWith.apply(this, arguments);\n                }\n\n                var queue = this.queue || [];\n                var requests = queue.splice(0, queue.length);\n                var request;\n\n                while (request = requests.shift()) {\n                    this.processRequest(request);\n                }\n            },\n\n            processRequest: function processRequest(request) {\n                try {\n                    if (request.aborted) {\n                        return;\n                    }\n\n                    var response = this.response || [404, {}, \"\"];\n\n                    if (this.responses) {\n                        for (var l = this.responses.length, i = l - 1; i >= 0; i--) {\n                            if (match.call(this, this.responses[i], request)) {\n                                response = this.responses[i].response;\n                                break;\n                            }\n                        }\n                    }\n\n                    if (request.readyState != 4) {\n                        this.log(response, request);\n\n                        request.respond(response[0], response[1], response[2]);\n                    }\n                } catch (e) {\n                    sinon.logError(\"Fake server request processing\", e);\n                }\n            },\n\n            restore: function restore() {\n                return this.xhr.restore && this.xhr.restore.apply(this.xhr, arguments);\n            }\n        };\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./core\");\n        require(\"./fake_xdomain_request\");\n        require(\"./fake_xml_http_request\");\n        require(\"../format\");\n        makeApi(sinon);\n        module.exports = sinon;\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else {\n        makeApi(sinon);\n    }\n}());\n\n/*global lolex */\n\n/**\n * Fake timer API\n * setTimeout\n * setInterval\n * clearTimeout\n * clearInterval\n * tick\n * reset\n * Date\n *\n * Inspired by jsUnitMockTimeOut from JsUnit\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    var sinon = {};\n}\n\n(function (global) {\n    function makeApi(sinon, lol) {\n        var llx = typeof lolex !== \"undefined\" ? lolex : lol;\n\n        sinon.useFakeTimers = function () {\n            var now, methods = Array.prototype.slice.call(arguments);\n\n            if (typeof methods[0] === \"string\") {\n                now = 0;\n            } else {\n                now = methods.shift();\n            }\n\n            var clock = llx.install(now || 0, methods);\n            clock.restore = clock.uninstall;\n            return clock;\n        };\n\n        sinon.clock = {\n            create: function (now) {\n                return llx.createClock(now);\n            }\n        };\n\n        sinon.timers = {\n            setTimeout: setTimeout,\n            clearTimeout: clearTimeout,\n            setImmediate: (typeof setImmediate !== \"undefined\" ? setImmediate : undefined),\n            clearImmediate: (typeof clearImmediate !== \"undefined\" ? clearImmediate : undefined),\n            setInterval: setInterval,\n            clearInterval: clearInterval,\n            Date: Date\n        };\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, epxorts, module, lolex) {\n        var sinon = require(\"./core\");\n        makeApi(sinon, lolex);\n        module.exports = sinon;\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module, require(\"lolex\"));\n    } else {\n        makeApi(sinon);\n    }\n}(typeof global != \"undefined\" && typeof global !== \"function\" ? global : this));\n\n/**\n * @depend fake_server.js\n * @depend fake_timers.js\n */\n/**\n * Add-on for sinon.fakeServer that automatically handles a fake timer along with\n * the FakeXMLHttpRequest. The direct inspiration for this add-on is jQuery\n * 1.3.x, which does not use xhr object's onreadystatehandler at all - instead,\n * it polls the object for completion with setInterval. Dispite the direct\n * motivation, there is nothing jQuery-specific in this file, so it can be used\n * in any environment where the ajax implementation depends on setInterval or\n * setTimeout.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function () {\n    function makeApi(sinon) {\n        function Server() {}\n        Server.prototype = sinon.fakeServer;\n\n        sinon.fakeServerWithClock = new Server();\n\n        sinon.fakeServerWithClock.addRequest = function addRequest(xhr) {\n            if (xhr.async) {\n                if (typeof setTimeout.clock == \"object\") {\n                    this.clock = setTimeout.clock;\n                } else {\n                    this.clock = sinon.useFakeTimers();\n                    this.resetClock = true;\n                }\n\n                if (!this.longestTimeout) {\n                    var clockSetTimeout = this.clock.setTimeout;\n                    var clockSetInterval = this.clock.setInterval;\n                    var server = this;\n\n                    this.clock.setTimeout = function (fn, timeout) {\n                        server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                        return clockSetTimeout.apply(this, arguments);\n                    };\n\n                    this.clock.setInterval = function (fn, timeout) {\n                        server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                        return clockSetInterval.apply(this, arguments);\n                    };\n                }\n            }\n\n            return sinon.fakeServer.addRequest.call(this, xhr);\n        };\n\n        sinon.fakeServerWithClock.respond = function respond() {\n            var returnVal = sinon.fakeServer.respond.apply(this, arguments);\n\n            if (this.clock) {\n                this.clock.tick(this.longestTimeout || 0);\n                this.longestTimeout = 0;\n\n                if (this.resetClock) {\n                    this.clock.restore();\n                    this.resetClock = false;\n                }\n            }\n\n            return returnVal;\n        };\n\n        sinon.fakeServerWithClock.restore = function restore() {\n            if (this.clock) {\n                this.clock.restore();\n            }\n\n            return sinon.fakeServer.restore.apply(this, arguments);\n        };\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require == \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require) {\n        var sinon = require(\"./core\");\n        require(\"./fake_server\");\n        require(\"./fake_timers\");\n        makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require);\n    } else {\n        makeApi(sinon);\n    }\n}());\n\n"]}