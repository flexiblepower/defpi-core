{"version":3,"sources":["../../../../src/javascripts/test/e2e/EditionViewSpec.js"],"names":["describe","beforeEach","browser","get","baseUrl","it","setLocation","then","$$","inputs","expect","length","toBe","getAttribute","input","sendKeys","first","click","uiSelect","choices","checkboxes","checkbox","subFormsExist","subforms","getUrlInput","urlInputContainsUrl","getLocationAbsUrl","url","toContain","subcategoryFieldIsDisplayed","subcategoryField","emptyMainCategory","selectSubcategoryField","subcategoryFieldIsHidden"],"mappings":"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","file":"EditionViewSpec.js","sourcesContent":["/*global describe,it,expect,$$,element,browser,by*/\ndescribe('EditionView', function () {\n    'use strict';\n\n    beforeEach(function() {\n        browser.get(browser.baseUrl);\n    });\n\n    describe('Fields mapping', function() {\n\n        it('should map nested fields from the REST response', function () {\n            browser.setLocation('/comments/edit/11')\n            .then(function() {\n                return $$('.ng-admin-field-author_name input');\n            })\n            .then(function (inputs) {\n                expect(inputs.length).toBe(1);\n                expect(inputs[0].getAttribute('value')).toBe('Logan Schowalter');\n                return inputs[0];\n            })\n            .then(function(input) {\n                return input.sendKeys('r');\n            })\n            .then(function() {\n                return $$('button[type=\"submit\"]').first().click();\n            })\n            .then(function() {\n                return browser.setLocation('/comments/edit/11');\n            })\n            .then(function() {\n                return $$('.ng-admin-field-author_name input').first();\n            })\n            .then(function (input) {\n                expect(input.getAttribute('value')).toBe('Logan Schowalterr');\n                // the data was modified in the server, we need to change it back to its original value\n                return input;\n            })\n            .then(function(input) {\n                return input.sendKeys(\"\\b\");\n            })\n            .then(function() {\n                return $$('button[type=\"submit\"]').first().click();\n            });\n        });\n    })\n\n    describe('ChoiceField', function() {\n\n        it('should render correctly choice fields', function () {\n            browser.setLocation('/posts/edit/1')\n            .then(function() {\n                return $$('.ng-admin-field-category .ui-select-container');\n            })\n            .then(function(uiSelect) {\n                expect(uiSelect.length).toBe(1)\n            })\n            .then(function() {\n                return $$('.ng-admin-field-category .btn').first().click();\n            })\n            .then(function() {\n                return $$('.ng-admin-field-category .ui-select-choices-row');\n            })\n            .then(function(choices) {\n                expect(choices.length).toBe(2)\n            });\n        });\n    });\n\n    describe('BooleanField', function() {\n        it('should render as a checkbox field when required', function () {\n            browser.setLocation('/tags/edit/5')\n            .then(function() {\n                return $$('.ng-admin-field-published input[type=\"checkbox\"]');\n            })\n            .then(function(checkboxes) {\n                expect(checkboxes.length).toBe(1);\n                return checkboxes[0];\n            })\n            .then(function(checkbox) {\n                expect(checkbox.getAttribute('checked')).toBe('true');\n                return checkbox.click();\n            })\n            .then(function() {\n                return $$('button[type=\"submit\"]').first().click();\n            })\n            .then(function() {\n                browser.setLocation('/tags/edit/5')\n            })\n            .then(function() {\n                return $$('.ng-admin-field-published input[type=\"checkbox\"]').first();\n            })\n            .then(function(checkbox) {\n                expect(checkbox.getAttribute('checked')).toBe(null);\n            })\n        });\n    })\n\n    describe('EmbeddedListField', function() {\n        beforeEach(function() {\n            browser.setLocation('/posts/edit/1');\n        });\n\n        it('should render as a list of subforms', function () {\n            $$('.ng-admin-field-backlinks ng-form')\n            .then(function subFormsExist(subforms) {\n                expect(subforms.length).toBe(1);\n            })\n            .then(function getUrlInput() {\n                return $$('.ng-admin-field-backlinks ng-form input#url').first();\n            })\n            .then(function urlInputContainsUrl(input) {\n                expect(input.getAttribute('value')).toBe('http://example.com/bar/baz.html');\n            });\n        });\n    })\n\n    describe('DetailLink', function() {\n        beforeEach(function() {\n            browser.setLocation('/posts/edit/1');\n        });\n\n        it('should redirect to corresponding detail view even for referenced_list entity', function () {\n            $$('#row-comments td a').first().click()\n            .then(function() {\n                return browser.getLocationAbsUrl();\n            })\n            .then(function(url) {\n                expect(url).toContain('/comments/edit/');\n            });\n        });\n    });\n\n    describe('Field template', function() {\n        beforeEach(function() {\n            browser.setLocation('/posts/edit/1');\n        });\n\n        it('should execute the template when the entry changes', function() {\n            $$('.ng-admin-field-subcategory')\n            .then(function subcategoryFieldIsDisplayed(subcategoryField) {\n                expect(subcategoryField.length).toBe(1);\n            })\n            .then(function emptyMainCategory() {\n                return $$('.ng-admin-field-category a').first().click();\n            })\n            .then(function selectSubcategoryField() {\n                return $$('.ng-admin-field-subcategory');\n            })\n            .then(function subcategoryFieldIsHidden(subcategoryField) {\n                expect(subcategoryField.length).toBe(0);\n            });\n        });\n    });\n});\n"]}