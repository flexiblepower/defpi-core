{"version":3,"sources":["../../../../../../../src/javascripts/test/unit/Main/component/directive/maMenuBarSpec.js"],"names":["describe","directive","require","Menu","Entity","blog","other","post","comment","tag","stats","$compile","$location","scope","directiveUsage","angular","module","filter","text","beforeEach","mock","inject","_$compile_","_$rootScope_","_$location_","it","postMenu","title","link","commentMenu","tagMenu","blogMenu","addChild","statsMenu","otherMenu","menu","autoClose","element","$digest","expect","isolateScope","isOpen","toBe","toggleMenu","activateLink","url"],"mappings":"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","file":"maMenuBarSpec.js","sourcesContent":["/*global angular,inject,describe,it,expect,beforeEach,module*/\ndescribe('directive: ma-menu-bar', function () {\n    'use strict';\n\n    var directive = require('../../../../../ng-admin/Main/component/directive/maMenuBar'),\n        Menu = require('admin-config/lib/Menu/Menu'),\n        Entity = require('admin-config/lib/Entity/Entity'),\n        blog = new Entity('blog'),\n        other = new Entity('other'),\n        post = new Entity('post'),\n        comment = new Entity('comment'),\n        tag = new Entity('tag'),\n        stats = new Entity('stats'),\n        $compile,\n        $location,\n        scope,\n        directiveUsage = '<ma-menu-bar menu=\"menu\"></ma-nenu-bar>';\n\n    angular.module('testapp_MenuBar', [])\n        .filter('translate', () => text => text)    \n        .directive('maMenuBar', directive);\n\n    beforeEach(angular.mock.module('testapp_MenuBar'));\n\n    beforeEach(inject(function (_$compile_, _$rootScope_, _$location_) {\n        $compile = _$compile_;\n        scope = _$rootScope_;\n        $location = _$location_;\n    }));\n\n    it('should autoClose menu when autoClose is true', function () {\n        var postMenu = new Menu(post).title('post').link('/post');\n        var commentMenu = new Menu(comment).title('comment').link('/comment');\n        var tagMenu = new Menu(tag).title('tag').link('/tag');\n        var blogMenu = new Menu(blog).title('blog')\n        .addChild(postMenu)\n        .addChild(commentMenu);\n        var statsMenu = new Menu(stats).title('stats').link('/stats');\n        var otherMenu = new Menu(other).title('other')\n        .addChild(statsMenu)\n        .addChild(tagMenu);\n        scope.menu = new Menu()\n        .autoClose(true)\n        .addChild(blogMenu)\n        .addChild(otherMenu);\n\n        var element = $compile(directiveUsage)(scope);\n        scope.$digest();\n        expect(element.isolateScope().isOpen(otherMenu)).toBe(false);\n        expect(element.isolateScope().isOpen(blogMenu)).toBe(false);\n\n        element.isolateScope().toggleMenu(otherMenu);\n        element.isolateScope().activateLink(tagMenu);\n        $location.url(tagMenu.link());\n        scope.$digest();\n        expect(element.isolateScope().isOpen(otherMenu)).toBe(true);\n        expect(element.isolateScope().isOpen(blogMenu)).toBe(false);\n\n        element.isolateScope().toggleMenu(blogMenu);\n        scope.$digest();\n        expect(element.isolateScope().isOpen(otherMenu)).toBe(true);\n        expect(element.isolateScope().isOpen(blogMenu)).toBe(true);\n\n        element.isolateScope().activateLink(postMenu);\n        $location.url(postMenu.link());\n        scope.$digest();\n        expect(element.isolateScope().isOpen(otherMenu)).toBe(false);\n        expect(element.isolateScope().isOpen(blogMenu)).toBe(true);\n    });\n\n    it('should not autoClose menu when autoClose is true', function () {\n        var postMenu = new Menu(post).title('post').link('/post');\n        var commentMenu = new Menu(comment).title('comment').link('/comment');\n        var tagMenu = new Menu(tag).title('tag').link('/tag');\n        var blogMenu = new Menu(blog).title('blog')\n        .addChild(postMenu)\n        .addChild(commentMenu);\n        var statsMenu = new Menu(stats).title('stats').link('/stats');\n        var otherMenu = new Menu(other).title('other')\n        .addChild(statsMenu)\n        .addChild(tagMenu);\n        scope.menu = new Menu()\n        .autoClose(false)\n        .addChild(blogMenu)\n        .addChild(otherMenu);\n\n        var element = $compile(directiveUsage)(scope);\n        scope.$digest();\n        expect(element.isolateScope().isOpen(otherMenu)).toBe(false);\n        expect(element.isolateScope().isOpen(blogMenu)).toBe(false);\n\n        element.isolateScope().toggleMenu(otherMenu);\n        element.isolateScope().activateLink(tagMenu);\n        $location.url(tagMenu.link());\n        scope.$digest();\n        expect(element.isolateScope().isOpen(otherMenu)).toBe(true);\n        expect(element.isolateScope().isOpen(blogMenu)).toBe(false);\n\n        element.isolateScope().toggleMenu(blogMenu);\n        scope.$digest();\n        expect(element.isolateScope().isOpen(otherMenu)).toBe(true);\n        expect(element.isolateScope().isOpen(blogMenu)).toBe(true);\n\n        element.isolateScope().activateLink(postMenu);\n        $location.url(postMenu.link());\n        scope.$digest();\n        expect(element.isolateScope().isOpen(otherMenu)).toBe(true);\n        expect(element.isolateScope().isOpen(blogMenu)).toBe(true);\n    });\n});\n"]}